<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
		<link rel="stylesheet" href="css/datatables.min.css" />
		<link rel="stylesheet" href="css/jquery.mobile-1.4.5.css">
		<link rel="stylesheet" href="css/format.css" />
		<link rel="stylesheet" href="css/jquery-ui.css" />
		<script src="js/jquery-1.11.3.min.js"></script>
		<script src="js/datatables.min.js"></script>
		<script src="js/jquery.mobile-1.4.5.min.js"></script>

		<script>
		var printError = function(error, explicit) {
			console.log(`[${explicit ? 'EXPLICIT' : 'INEXPLICIT'}] ${error.name}: ${error.message}`);
		}
 
		try {
		var columns = [
			{ title: "Id", data: "documentId" },
			{ title: "Title", data: "documentTitle" },
			{ title: "Date", data: "ReferenceDate" },
			{ title: "Action", data: "Actions" },
			{ title: "Name", date: "name"},
			{ title: "Rank", date: "rank"},
			{ title: "Points", date: "points"},
			{ title: "Prestige", date: "prestige"}
		];
		$(function() {
			var dTable = $("table").DataTable({
				columns: columns,
				pageLength: 100,
				retrieve: false
			});
			$.getJSON("download.json", function (data) {
				for (var md of data) {
					md.Actions = "<a href=\"drama.html?drama="+md.documentId+"\" target=\"_blank\">Open</a>";
					var row = document.createElement("tr");
					for (var c of columns) {
						//$(row).append("<td>"+md[c.data]+"</td>");
					}
					$(".ui-content tbody").append(row);
					//console.log(md);
					dTable.row.add(md).draw();

				}
			});
		});
		} catch (e) {
    if (e instanceof SyntaxError) {
        printError(e, true);
    } else {
        printError(e, false);
    }
}
		</script>
	</head>
	<body>
	<div data-role="page">
		<div data-role="header">
			<h1>Rank</h1>
			<a href="mailto:cb2122@gmail.com">Contact</a>
		</div>
		<div class="ui-content" data-enhance="false">
			<table />
		</div>
	</div>
	</body>
</html>
